/*
 * jQuery UI Accordion 1.9m4
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Accordion
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(f){f.widget("ui.accordion",{options:{active:0,animated:"slide",collapsible:false,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"}},_create:function(){var a=this,b=a.options;a.running=false;a.element.addClass("ui-accordion ui-widget ui-helper-reset");a.headers=a.element.find(b.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");a._hoverable(a.headers);
a._focusable(a.headers);a.headers.find(":first-child").addClass("ui-accordion-heading");a.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(!b.collapsible&&b.active===false)b.active=0;if(b.active<0)b.active+=this.headers.length;a.active=a._findActive(b.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");a.active.next().addClass("ui-accordion-content-active");a._createIcons();a.refresh();
a.element.attr("role","tablist");a.headers.attr("role","tab").bind("keydown.accordion",f.proxy(a,"_keydown")).next().attr("role","tabpanel");a.headers.not(a.active).attr({"aria-expanded":"false",tabIndex:-1}).next().hide();a.active.length?a.active.attr({"aria-expanded":"true",tabIndex:0}):a.headers.eq(0).attr("tabIndex",0);f.browser.safari||a.headers.find("a").attr("tabIndex",-1);this._setupEvents(b.event)},_createIcons:function(){var a=this.options.icons;if(a){f("<span>").addClass("ui-accordion-header-icon ui-icon "+
a.header).prependTo(this.headers);this.active.children(".ui-accordion-header-icon").removeClass(a.header).addClass(a.activeHeader);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-accordion-header-icon").remove();this.element.removeClass("ui-accordion-icons")},_destroy:function(){this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabIndex").find("a").removeAttr("tabIndex").end().find(".ui-accordion-heading").removeClass("ui-accordion-heading");
this._destroyIcons();var a=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");this.options.heightStyle!=="content"&&a.css("height","")},_setOption:function(a,b){if(a==="active")this._activate(b);else{this._super("_setOption",a,b);a==="collapsible"&&!b&&this.options.active===false&&this._activate(0);a==="event"&&this._setupEvents(b);if(a===
"icons"){this._destroyIcons();b&&this._createIcons()}a==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-accordion-disabled ui-state-disabled",!!b)}},_keydown:function(a){if(!(this.options.disabled||a.altKey||a.ctrlKey)){var b=f.ui.keyCode,d=this.headers.length,c=this.headers.index(a.target),e=false;switch(a.keyCode){case b.RIGHT:case b.DOWN:e=this.headers[(c+1)%d];break;case b.LEFT:case b.UP:e=this.headers[(c-1+d)%d];break;case b.SPACE:case b.ENTER:this._eventHandler(a)}if(e){f(a.target).attr("tabIndex",
-1);f(e).attr("tabIndex",0);e.focus();a.preventDefault()}}},refresh:function(){var a=this.options,b=this.element.parent(),d,c;if(a.heightStyle==="fill"){if(!f.support.minHeight){c=b.css("overflow");b.css("overflow","hidden")}d=b.height();this.element.siblings(":visible").each(function(){var e=f(this),g=e.css("position");g==="absolute"||g==="fixed"||(d-=e.outerHeight(true))});c&&b.css("overflow",c);this.headers.each(function(){d-=f(this).outerHeight(true)});this.headers.next().each(function(){f(this).height(Math.max(0,
d-f(this).innerHeight()+f(this).height()))}).css("overflow","auto")}else if(a.heightStyle==="auto"){d=0;this.headers.next().each(function(){d=Math.max(d,f(this).height("").height())}).height(d)}return this},_activate:function(a){a=this._findActive(a)[0];if(a!==this.active[0]){a=a||this.active;this._eventHandler({target:a,currentTarget:a,preventDefault:f.noop})}},_findActive:function(a){return typeof a==="number"?this.headers.eq(a):f()},_setupEvents:function(a){this.headers.unbind(".accordion");a&&
this.headers.bind(a.split(" ").join(".accordion ")+".accordion",f.proxy(this,"_eventHandler"))},_eventHandler:function(a){var b=this.options,d=this.active,c=f(a.currentTarget),e=c[0]===d[0],g=e&&b.collapsible,h=g?f():c.next(),j=d.next();h={oldHeader:d,oldContent:j,newHeader:g?f():c,newContent:h};a.preventDefault();if(!(b.disabled||this.running||e&&!b.collapsible||this._trigger("beforeActivate",null,h)===false)){b.active=g?false:this.headers.index(c);this.active=e?f():c;this._toggle(h);d.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-accordion-header-icon").removeClass(b.icons.activeHeader).addClass(b.icons.header);
if(!e){c.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-accordion-header-icon").removeClass(b.icons.header).addClass(b.icons.activeHeader);c.next().addClass("ui-accordion-content-active")}}},_toggle:function(a){function b(){d._completed(a)}var d=this,c=d.options,e=a.newContent,g=a.oldContent;d.running=true;if(c.animated){var h=f.ui.accordion.animations;c=c.animated;var j;if(!h[c]){j={easing:f.easing[c]?c:"slide",duration:700};c="slide"}h[c]({toShow:e,
toHide:g,complete:b,down:e.length&&(!g.length||e.index()<g.index())},j)}else{g.hide();e.show();b()}g.prev().attr({"aria-expanded":"false",tabIndex:-1}).blur();e.prev().attr({"aria-expanded":"true",tabIndex:0}).focus()},_completed:function(a){var b=a.newContent,d=a.oldContent;this.running=false;this.options.heightStyle==="content"&&b.add(d).css({height:"",overflow:""});d.removeClass("ui-accordion-content-active");if(d.length)d.parent()[0].className=d.parent()[0].className;this._trigger("activate",
null,a)}});f.extend(f.ui.accordion,{version:"1.9m4",animations:{slide:function(a,b){var d=a.toShow.css("overflow"),c=a.toHide.css("overflow"),e=0,g={},h={},j;a=f.extend({easing:"swing",duration:300},a,b);if(a.toHide.size())if(a.toShow.size()){b=a.toShow;j=b[0].style.width;b.width(parseInt(b.parent().width(),10)-parseInt(b.css("paddingLeft"),10)-parseInt(b.css("paddingRight"),10)-(parseInt(b.css("borderLeftWidth"),10)||0)-(parseInt(b.css("borderRightWidth"),10)||0));f.each(["height","paddingTop",
"paddingBottom"],function(k,i){h[i]="hide";k=(""+f.css(a.toShow[0],i)).match(/^([\d+-.]+)(.*)$/);g[i]={value:k[1],unit:k[2]||"px"}});a.toShow.css({height:0,overflow:"hidden"}).show();a.toHide.filter(":hidden").each(a.complete).end().filter(":visible").animate(h,{step:function(k,i){if(i.prop=="height")e=i.end-i.start===0?0:(i.now-i.start)/(i.end-i.start);a.toShow[0].style[i.prop]=e*g[i.prop].value+g[i.prop].unit},duration:a.duration,easing:a.easing,complete:function(){a.toShow.css({width:j,overflow:d});
a.toHide.css("overflow",c);a.complete()}})}else a.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},a);else{j=a.toShow[0].style.width;a.toShow.show().width(a.toShow.width()).hide().animate({height:"show",paddingTop:"show",paddingBottom:"show"},{duration:a.duration,easing:a.easing,complete:function(){a.toShow.width(j);a.complete()}})}},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1E3:200})}}});if(f.uiBackCompat!==false){(function(a,
b){a.extend(b.options,{navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var d=b._create;b._create=function(){if(this.options.navigation){var c=this,e=this.element.find(this.options.header),g=e.next();(current=e.add(g).find("a").filter(this.options.navigationFilter)[0])&&e.add(g).each(function(h){if(a.contains(this,current)){c.options.active=Math.floor(h/2);return false}})}d.call(this)}})(jQuery,jQuery.ui.accordion.prototype);(function(a,
b){a.extend(b.options,{heightStyle:null,autoHeight:true,clearStyle:false,fillSpace:false});var d=b._create,c=b._setOption;a.extend(b,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();d.call(this)},_setOption:function(e){if(e==="autoHeight"||e==="clearStyle"||e==="fillSpace")this.options.heightStyle=this._mergeHeightStyle();c.apply(this,arguments)},_mergeHeightStyle:function(){var e=this.options;if(e.fillSpace)return"fill";if(e.clearStyle)return"content";
if(e.autoHeight)return"auto"}})})(jQuery,jQuery.ui.accordion.prototype);(function(a,b){a.extend(b.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var d=b._createIcons;b._createIcons=function(){this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected;d.call(this)}})(jQuery,jQuery.ui.accordion.prototype);(function(a,b){b.activate=b._activate;var d=b._findActive;b._findActive=function(c){if(c===-1)c=false;if(c&&typeof c!=="number"){c=
this.headers.index(this.headers.filter(c));if(c===-1)c=false}return d.call(this,c)}})(jQuery,jQuery.ui.accordion.prototype);jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh;(function(a,b){var d=b._trigger;b._trigger=function(c,e,g){var h=d.apply(this,arguments);if(!h)return false;if(c==="beforeActivate")h=d.call(this,"changestart",e,g);else if(c==="activate")h=d.call(this,"change",e,g);return h}})(jQuery,jQuery.ui.accordion.prototype)}})(jQuery);
