/*
 * jQuery UI Spinner 1.9m4
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Spinner
 *
 * Depends:
 *  jquery.ui.core.js
 *  jquery.ui.widget.js
 */
(function(d){d.widget("ui.spinner",{defaultElement:"<input>",options:{incremental:true,max:null,min:null,numberformat:null,page:10,step:null,value:null},_create:function(){this._draw();this._markupOptions();this._mousewheel();this._aria()},_markupOptions:function(){var a=this;d.each({min:-Number.MAX_VALUE,max:Number.MAX_VALUE,step:1},function(b,e){if(a.options[b]===null){var c=a.element.attr(b);a.options[b]=typeof c=="string"&&c.length>0?a._parse(c):e}});this.value(this.options.value!==null?this.options.value:
this.element.val()||0)},_draw:function(){var a=this,b=a.options,e=this.uiSpinner=a.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(a._uiSpinnerHtml()).parent().append(a._buttonHtml()).hover(function(){b.disabled||d(this).addClass("ui-state-hover");a.hovered=true},function(){d(this).removeClass("ui-state-hover");a.hovered=false});this.element.attr("role","spinbutton").bind("keydown.spinner",function(c){if(!a.options.disabled){if(a._start(c))return a._keydown(c);return true}}).bind("keyup.spinner",
function(c){if(!a.options.disabled)if(a.spinning){a._stop(c);a._change(c)}}).bind("focus.spinner",function(){e.addClass("ui-state-active");a.focused=true}).bind("blur.spinner",function(){a.value(a.element.val());a.hovered||e.removeClass("ui-state-active");a.focused=false});this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all").bind("mousedown",function(c){if(!a.options.disabled){if(a._start(c)===false)return false;a._repeat(null,d(this).hasClass("ui-spinner-up")?
1:-1,c)}}).bind("mouseup",function(c){if(!a.options.disabled)if(a.spinning){a._stop(c);a._change(c)}}).bind("mouseenter",function(){if(!a.options.disabled)if(d(this).hasClass("ui-state-active")){if(a._start(event)===false)return false;a._repeat(null,d(this).hasClass("ui-spinner-up")?1:-1,event)}}).bind("mouseleave",function(){if(a.spinning){a._stop(event);a._change(event)}});b.disabled&&this.disable()},_keydown:function(a){var b=d.ui.keyCode;switch(a.keyCode){case b.UP:this._repeat(null,1,a);return false;
case b.DOWN:this._repeat(null,-1,a);return false;case b.PAGE_UP:this._repeat(null,this.options.page,a);return false;case b.PAGE_DOWN:this._repeat(null,-this.options.page,a);return false;case b.ENTER:this.value(this.element.val())}return true},_mousewheel:function(){if(d.fn.mousewheel){var a=this;this.element.bind("mousewheel.spinner",function(b,e){if(!a.options.disabled){if(!a.spinning&&!a._start(b))return false;a._spin((e>0?1:-1)*a.options.step,b);clearTimeout(a.timeout);a.timeout=setTimeout(function(){if(a.spinning){a._stop(b);
a._change(b)}},100);b.preventDefault()}})}},_uiSpinnerHtml:function(){return'<span class="ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all"></span>'},_buttonHtml:function(){return'<a class="ui-spinner-button ui-spinner-up ui-corner-tr"><span class="ui-icon ui-icon-triangle-1-n">&#9650;</span></a><a class="ui-spinner-button ui-spinner-down ui-corner-br"><span class="ui-icon ui-icon-triangle-1-s">&#9660;</span></a>'},_start:function(a){if(!this.spinning&&this._trigger("start",a)!==
false){if(!this.counter)this.counter=1;return this.spinning=true}return false},_repeat:function(a,b,e){var c=this;a=a||500;clearTimeout(this.timer);this.timer=setTimeout(function(){c._repeat(40,b,e)},a);c._spin(b*c.options.step,e)},_spin:function(a,b){if(!this.counter)this.counter=1;a=this.value()+a*(this.options.incremental&&this.counter>20?this.counter>100?this.counter>200?100:10:2:1);if(this._trigger("spin",b,{value:a})!==false){this.value(a);this.counter++}},_stop:function(a){this.counter=0;this.timer&&
window.clearTimeout(this.timer);this.element[0].focus();this.spinning=false;this._trigger("stop",a)},_change:function(a){this._trigger("change",a)},_setOption:function(a,b){if(a=="value"){b=this._parse(b);if(b<this.options.min)b=this.options.min;if(b>this.options.max)b=this.options.max}if(a=="disabled")if(b){this.element.attr("disabled",true);this.buttons.button("disable")}else{this.element.removeAttr("disabled");this.buttons.button("enable")}this._super("_setOption",a,b)},_setOptions:function(a){this._super("_setOptions",
a);"value"in a&&this._format(this.options.value);this._aria()},_aria:function(){this.element.attr("aria-valuemin",this.options.min).attr("aria-valuemax",this.options.max).attr("aria-valuenow",this.options.value)},_parse:function(a){if(typeof a=="string")a=d.global&&this.options.numberformat?d.global.parseFloat(a):+a;return isNaN(a)?null:a},_format:function(a){this.element.val(d.global&&this.options.numberformat?d.global.format(a,this.options.numberformat):a)},destroy:function(){this.element.removeClass("ui-spinner-input").removeAttr("disabled").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this._super("destroy");this.uiSpinner.replaceWith(this.element)},stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:function(a){this.stepUp((a||1)*this.options.page)},pageDown:function(a){this.stepDown((a||1)*this.options.page)},value:function(a){if(!arguments.length)return this._parse(this.element.val());this.option("value",a)},widget:function(){return this.uiSpinner}});d.ui.spinner.version="1.9m4"})(jQuery);
